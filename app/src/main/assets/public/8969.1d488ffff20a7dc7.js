(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8969],{8969:(N,E,w)=>{"use strict";w.r(E),w.d(E,{GamePageModule:()=>ve});var P=w(9808),I=w(3950),i=w(655),s=w(7579),a=w(2722),g=w(8306),m=w(4986),v=w(3532);var A=w(4408),e=w(727);const t={schedule(p){let y=requestAnimationFrame,o=cancelAnimationFrame;const{delegate:f}=t;f&&(y=f.requestAnimationFrame,o=f.cancelAnimationFrame);const x=y(O=>{o=void 0,p(O)});return new e.w0(()=>null==o?void 0:o(x))},requestAnimationFrame(...p){const{delegate:y}=t;return((null==y?void 0:y.requestAnimationFrame)||requestAnimationFrame)(...p)},cancelAnimationFrame(...p){const{delegate:y}=t;return((null==y?void 0:y.cancelAnimationFrame)||cancelAnimationFrame)(...p)},delegate:void 0};var r=w(640);const c=new class u extends r.v{flush(y){this._active=!0;const o=this._scheduled;this._scheduled=void 0;const{actions:f}=this;let x;y=y||f.shift();do{if(x=y.execute(y.state,y.delay))break}while((y=f[0])&&y.id===o&&f.shift());if(this._active=!1,x){for(;(y=f[0])&&y.id===o&&f.shift();)y.unsubscribe();throw x}}}(class n extends A.o{constructor(y,o){super(y,o),this.scheduler=y,this.work=o}requestAsyncId(y,o,f=0){return null!==f&&f>0?super.requestAsyncId(y,o,f):(y.actions.push(this),y._scheduled||(y._scheduled=t.requestAnimationFrame(()=>y.flush(void 0))))}recycleAsyncId(y,o,f=0){if(null!=f&&f>0||null==f&&this.delay>0)return super.recycleAsyncId(y,o,f);y.actions.some(x=>x.id===o)||(t.cancelAnimationFrame(o),y._scheduled=void 0)}});var b=w(9300),T=w(4482),k=w(5403),C=w(8421),L=w(4671),G=w(5032),B=w(3269),D=w(4004),Y=w(3099),d=w(5e3),V=w(1135),R=w(4968);let Z=(()=>{class p{constructor(){this.level=new V.X(1),this.score=new V.X(0),this.lives=new V.X([0,1,2]),this.spawners=new V.X([0]),this.destroyBombs=new s.x,this.dificulty=5,this.paused=!1,this.touchCoords=(0,R.R)(document,"touchmove").pipe((0,D.U)(o=>o.touches[0]),(0,D.U)(o=>({x:o.clientX,y:o.clientY})),(0,Y.B)())}levelUp(){const o=this.level.getValue();o<100&&(this.level.next(o+1),this.increaseDificulty(o))}addLife(){const o=this.lives.getValue();o.length<6&&(o.push(o.length),this.lives.next(o))}removeLife(){const o=this.lives.getValue();o.pop(),this.lives.next(null!=o?o:[])}addScore(o){this.score.next(this.score.getValue()+o)}increaseDificulty(o){if(this.dificulty<55&&(this.dificulty+=.5),o%10==1){const f=this.spawners.getValue();f.length<10&&(f.push(f.length),this.spawners.next(f))}}nukeAllBombs(){this.destroyBombs.next()}}return p.\u0275fac=function(o){return new(o||p)},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac}),p})(),Q=(()=>{class p{constructor(o){this.gameStateService=o,this.bombs=[0,1,2,3,4,5,6,7,8,9],this.cooldowns={},this.destroy=new s.x,this.spawner=function h(p=0,y,o=m.P){let f=-1;return null!=y&&((0,v.K)(y)?o=y:f=y),new g.y(x=>{let O=function _(p){return p instanceof Date&&!isNaN(p)}(p)?+p-o.now():p;O<0&&(O=0);let M=0;return o.schedule(function(){x.closed||(x.next(M++),0<=f?this.schedule(void 0,f):x.complete())},O)})}(0,10,c).pipe((0,b.h)(()=>!this.gameStateService.paused),(0,b.h)(()=>Math.floor(100*Math.random())>100-this.gameStateService.dificulty),function S(...p){const y=(0,B.jO)(p);return(0,T.e)((o,f)=>{const x=p.length,O=new Array(x);let M=p.map(()=>!1),H=!1;for(let F=0;F<x;F++)(0,C.Xf)(p[F]).subscribe((0,k.x)(f,X=>{O[F]=X,!H&&!M[F]&&(M[F]=!0,(H=M.every(L.y))&&(M=null))},G.Z));o.subscribe((0,k.x)(f,F=>{if(H){const X=[F,...O];f.next(y?y(...X):X)}}))})}(this.gameStateService.spawners),(0,D.U)(([f,x])=>({spawner:Math.floor(Math.random()*x.length),bomb:Math.floor(Math.random()*this.bombs.length),score:Math.ceil(100*Math.random()*this.gameStateService.dificulty),type:this.getBombType()})),(0,a.R)(this.destroy),(0,Y.B)())}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}getBombType(){const o=Math.floor(100*Math.random());return o<95?"Normal":o<98?"Life":this.checkCooldown("Nuke",1e3)}checkCooldown(o,f){return this.cooldowns[o]?"Normal":(this.cooldowns[o]=!0,f>=0&&setTimeout(()=>this.cooldowns[o]=!1,f),o)}}return p.\u0275fac=function(o){return new(o||p)(d.LFG(Z))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac}),p})();var q=w(1799),K=w(1573),j=w(6461),z=w(5548),U=w(5020),ee=w(452);function W(p,y=!1){return(0,T.e)((o,f)=>{let x=0;o.subscribe((0,k.x)(f,O=>{const M=p(O,x++);(M||y)&&f.next(O),!M&&f.complete()}))})}const te=["bomb"],ne=function(p,y,o){return[p,y,o]};let ie=(()=>{class p{constructor(o,f,x){this.cdr=o,this.bombSpawnerService=f,this.gameStateService=x,this.spawned=!1,this.exploding=!1,this.bombScore=0,this.type="Normal",this.destroy=new s.x}ngOnChanges(o){o.gameOver&&this.gameOver&&this.bombExplode(!0,!1)}ngOnInit(){this.bombSpawnerService.spawner.pipe((0,b.h)(o=>!this.spawned&&o.spawner===this.spawner&&o.bomb===this.bomb),W(()=>!this.gameOver),(0,a.R)(this.destroy)).subscribe(o=>{this.bombScore=o.score,this.type=o.type,this.spawned=!0,this.cdr.detectChanges()}),this.gameStateService.destroyBombs.pipe((0,a.R)(this.destroy)).subscribe(()=>this.bombExplode(!0)),this.gameStateService.touchCoords.pipe((0,b.h)(()=>!this.paused&&this.spawned&&!this.exploding),(0,D.U)(o=>({coord:o,rect:this.getBoundingClientRect()})),(0,b.h)(({coord:o,rect:f})=>o.x>=f.left&&o.x<=f.right),(0,D.U)(({coord:o})=>({coord:o,rect:this.getBoundingClientRect(!0)})),(0,b.h)(({coord:o,rect:f})=>o.y>=f.top&&o.y<=f.bottom),W(()=>!this.gameOver),(0,a.R)(this.destroy)).subscribe(()=>this.bombExplode())}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}bombExplode(o=!1,f=!0){var x;if(!this.paused&&this.spawned&&!this.exploding&&(this.exploding=!0,this.cdr.detectChanges(),f&&(this.gameStateService.addScore(this.bombScore),null===(x=this.sound)||void 0===x||x.play()),!o))switch(this.type){case"Life":this.gameStateService.addLife();break;case"Nuke":this.gameStateService.nukeAllBombs()}}animationEnd(){var o;this.exploding?(this.spawned=!1,this.exploding=!1):this.spawned&&(this.exploding=!0,this.gameStateService.removeLife(),null===(o=this.sound)||void 0===o||o.play()),this.cdr.detectChanges()}getBoundingClientRect(o){return(o||!this.rect)&&(this.rect=this.bombElement.nativeElement.getBoundingClientRect()),this.rect}}return p.\u0275fac=function(o){return new(o||p)(d.Y36(d.sBO),d.Y36(Q),d.Y36(Z))},p.\u0275cmp=d.Xpm({type:p,selectors:[["app-bomb"]],viewQuery:function(o,f){if(1&o&&d.Gf(te,7),2&o){let x;d.iGM(x=d.CRH())&&(f.bombElement=x.first)}},inputs:{spawner:"spawner",bomb:"bomb",gameOver:"gameOver",sound:"sound",paused:"paused"},features:[d.TTD],decls:4,vars:5,consts:[[1,"bomb",3,"ngClass","pointerenter","animationend"],["bomb",""],[1,"explosion-container"],[1,"explosion"]],template:function(o,f){1&o&&(d.TgZ(0,"div",0,1),d.NdJ("pointerenter",function(){return f.bombExplode()})("animationend",function(){return f.animationEnd()}),d.TgZ(2,"div",2),d._UZ(3,"div",3),d.qZA()()),2&o&&d.Q6J("ngClass",d.kEZ(1,ne,f.spawned?"falling":"",f.paused?"paused":"",f.exploding?"exploding":f.type))},directives:[P.mk],styles:["[_nghost-%COMP%]{display:block;width:32px;height:32px}.bomb[_ngcontent-%COMP%]{width:100%;height:100%;background-image:url(/assets/sprites/bomb.png);background-position:center;background-repeat:no-repeat;display:none}.bomb[_ngcontent-%COMP%]   .explosion-container[_ngcontent-%COMP%]{display:none;width:64px;height:64px;transform:translate(-25%,-25%);overflow:hidden}.bomb[_ngcontent-%COMP%]   .explosion-container[_ngcontent-%COMP%]   .explosion[_ngcontent-%COMP%]{width:1344px;height:64px;background-image:url(/assets/sprites/explosion.png);background-position:left;background-repeat:no-repeat;animation:explosion .6s steps(21) forwards}.bomb.falling[_ngcontent-%COMP%]{display:block;animation:fall 5s linear forwards}.bomb.paused[_ngcontent-%COMP%]{animation-play-state:paused}.bomb.exploding[_ngcontent-%COMP%]{pointer-events:none;background-image:none;animation-play-state:paused}.bomb.exploding[_ngcontent-%COMP%]   .explosion-container[_ngcontent-%COMP%]{display:block}.bomb.Life[_ngcontent-%COMP%]{background-image:url(/assets/sprites/bomb_life.png)}.bomb.Nuke[_ngcontent-%COMP%]{background-image:url(/assets/sprites/bomb_nuke.png)}@keyframes fall{0%{transform:translateY(0)}to{transform:translateY(calc(100vh - 64px))}}@keyframes explosion{0%{transform:translate(0)}to{transform:translate(-100%)}}"],changeDetection:0}),p})();var $=w(7703),J=w(8099);const re=["sky"];function oe(p,y){if(1&p&&(d.TgZ(0,"div",8),d._uU(1),d.qZA()),2&p){const o=d.oxw();d.xp6(1),d.hij(" ","Level "+o.level,"\n")}}function ae(p,y){if(1&p&&d._UZ(0,"app-bomb",11),2&p){const o=y.$implicit,f=d.oxw().$implicit,x=d.oxw();d.Q6J("spawner",f)("bomb",o)("gameOver",x.gameOver)("sound",x.bombSound)("paused",x.paused)}}function se(p,y){if(1&p&&(d.TgZ(0,"div",9),d.YNc(1,ae,1,5,"app-bomb",10),d.qZA()),2&p){const o=d.oxw();d.xp6(1),d.Q6J("ngForOf",o.bombs)("ngForTrackBy",o.trackByItself)}}function le(p,y){1&p&&d._UZ(0,"div",14)}function ue(p,y){if(1&p&&(d.TgZ(0,"div",12),d.YNc(1,le,1,0,"div",13),d.qZA()),2&p){const o=d.oxw();d.xp6(1),d.Q6J("ngForOf",o.lives)("ngForTrackBy",o.trackByItself)}}function ce(p,y){1&p&&(d.TgZ(0,"div",18),d._uU(1),d.qZA()),2&p&&(d.xp6(1),d.Oqu("New HighScore!"))}function de(p,y){if(1&p&&(d.TgZ(0,"div",15)(1,"div",16),d._uU(2,"Game Over"),d.qZA(),d.YNc(3,ce,2,1,"div",17),d.qZA()),2&p){const o=d.oxw();d.xp6(3),d.Q6J("ngIf",o.newHighScore)}}function fe(p,y){if(1&p){const o=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){return d.CHM(o),d.oxw().pause()}),d.TgZ(1,"mat-icon"),d._uU(2),d.qZA()()}if(2&p){const o=d.oxw();d.xp6(2),d.Oqu(o.paused?"play_circle_outline":"pause_circle_outline")}}function _e(p,y){1&p&&(d.TgZ(0,"div",15)(1,"div",20),d._uU(2,"Paused"),d.qZA()())}let he=(()=>{class p{constructor(o,f,x,O,M){this.cdr=o,this.router=f,this.bombSpawnerService=x,this.gameStateService=O,this.settingsService=M,this.bombs=this.bombSpawnerService.bombs,this.paused=!1,this.gameOver=!1,this.levelUpAnimations=!1,this.newHighScore=!1,this.destroy=new s.x}ngOnInit(){this.settingsService.enableSounds&&(this.bombSound=new j.Howl({src:["/assets/sounds/bomb.wav"],preload:!0})),this.settingsService.enabledMusic&&(this.highscoreMusic=new j.Howl({src:["/assets/sounds/highscoreMusic.mp3"],preload:!0,html5:!0}),this.backgroundMusic=new j.Howl({src:["/assets/sounds/backMusic.mp3"],loop:!0,preload:!0,html5:!0,onload:()=>this.backgroundMusic.play()})),z.g.addListener("appStateChange",({isActive:o})=>{var f;o||(this.paused||this.pause(),(null===(f=this.highscoreMusic)||void 0===f?void 0:f.playing)&&this.highscoreMusic.stop())}),this.gameStateService.level.pipe((0,a.R)(this.destroy)).subscribe(o=>{this.level=o,this.levelUpAnimations=!0,this.cdr.detectChanges(),setTimeout(()=>{this.levelUpAnimations=!1,this.cdr.detectChanges()},2500)}),this.gameStateService.spawners.pipe((0,a.R)(this.destroy)).subscribe(o=>this.spawners=o),this.gameStateService.score.pipe((0,a.R)(this.destroy)).subscribe(o=>{this.score=o,this.checkLevelUp(o),this.cdr.detectChanges()}),this.gameStateService.lives.pipe((0,a.R)(this.destroy)).subscribe(o=>{this.lives=o,this.checkGameOver(o),this.cdr.detectChanges()})}ngOnDestroy(){var o,f,x;this.destroy.next(),this.destroy.complete(),null===(o=this.fireWorks)||void 0===o||o.stop(),null===(f=this.backgroundMusic)||void 0===f||f.stop(),null===(x=this.highscoreMusic)||void 0===x||x.stop()}pause(){var o,f;this.paused=!this.paused,this.gameStateService.paused=this.paused,this.cdr.detectChanges(),this.paused?null===(o=this.backgroundMusic)||void 0===o||o.pause():null===(f=this.backgroundMusic)||void 0===f||f.play()}trackByItself(o,f){return f}checkLevelUp(o){o>1e3*this.level*this.level&&this.gameStateService.levelUp()}checkGameOver(o){var f;return(0,i.mG)(this,void 0,void 0,function*(){if(!o.length&&!this.gameOver){this.gameOver=!0,null===(f=this.backgroundMusic)||void 0===f||f.stop(),this.score>0&&(yield this.registerHighScore(this.score));const x=()=>{this.router.navigateByUrl("/home"),document.body.removeEventListener("click",x),this.cdr.detectChanges()};setTimeout(()=>document.body.addEventListener("click",x),500)}})}registerHighScore(o){return(0,i.mG)(this,void 0,void 0,function*(){return yield(0,K.Vx)("highscores",f=>{var x;const O=null!==(x=null==f?void 0:f.sort((H,F)=>F.score-H.score))&&void 0!==x?x:[];if(O.length<5)return O.push(this.newHighScoreAnimation(o)),O;const M=O.findIndex(H=>o>H.score);return M>-1&&M<5&&O.splice(M,0,this.newHighScoreAnimation(o)),O.slice(0,5)})})}newHighScoreAnimation(o){var f;return this.newHighScore=!0,this.cdr.detectChanges(),this.fireWorks=new q.Fireworks(this.skyComponent.nativeElement,{}),this.fireWorks.start(),null===(f=this.highscoreMusic)||void 0===f||f.play(),{name:this.settingsService.playerName||"New Player",score:o,date:new Date}}}return p.\u0275fac=function(o){return new(o||p)(d.Y36(d.sBO),d.Y36(U.F0),d.Y36(Q),d.Y36(Z),d.Y36(ee.g))},p.\u0275cmp=d.Xpm({type:p,selectors:[["ng-component"]],viewQuery:function(o,f){if(1&o&&d.Gf(re,7),2&o){let x;d.iGM(x=d.CRH())&&(f.skyComponent=x.first)}},features:[d._Bn([Q,Z])],decls:10,vars:8,consts:[["class","level-anim",4,"ngIf"],[1,"sky"],["sky",""],["class","bomb-spawn",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ground"],["class","lives",4,"ngIf"],["class","center-text",4,"ngIf"],["mat-icon-button","","class","pause-button",3,"click",4,"ngIf"],[1,"level-anim"],[1,"bomb-spawn"],[3,"spawner","bomb","gameOver","sound","paused",4,"ngFor","ngForOf","ngForTrackBy"],[3,"spawner","bomb","gameOver","sound","paused"],[1,"lives"],["class","life",4,"ngFor","ngForOf","ngForTrackBy"],[1,"life"],[1,"center-text"],[1,"game-over"],["class","new-highscore",4,"ngIf"],[1,"new-highscore"],["mat-icon-button","",1,"pause-button",3,"click"],[1,"paused"]],template:function(o,f){1&o&&(d.YNc(0,oe,2,1,"div",0),d.TgZ(1,"div",1,2),d.YNc(3,se,2,2,"div",3),d.qZA(),d.TgZ(4,"div",4),d._uU(5),d.qZA(),d.YNc(6,ue,2,2,"div",5),d.YNc(7,de,4,1,"div",6),d.YNc(8,fe,3,1,"button",7),d.YNc(9,_e,3,0,"div",6)),2&o&&(d.Q6J("ngIf",!f.gameOver&&f.levelUpAnimations),d.xp6(3),d.Q6J("ngForOf",f.spawners)("ngForTrackBy",f.trackByItself),d.xp6(2),d.Oqu("Score: "+f.score),d.xp6(1),d.Q6J("ngIf",!f.gameOver),d.xp6(1),d.Q6J("ngIf",f.gameOver),d.xp6(1),d.Q6J("ngIf",!f.gameOver),d.xp6(1),d.Q6J("ngIf",!f.gameOver&&f.paused))},directives:[P.O5,P.sg,ie,$.lW,J.Hw],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:stretch;width:100vw;height:100vh}.level-anim[_ngcontent-%COMP%]{position:absolute;top:20px;left:50%;transform:translate(-50%);font-size:24px;text-align:center;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black;color:#fff;animation:flash 1s ease-in-out infinite}.pause-button[_ngcontent-%COMP%]{color:#fff;position:absolute;top:5px;right:5px}.pause-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:40px;height:40px;line-height:40px;font-size:40px}.lives[_ngcontent-%COMP%]{position:absolute;bottom:-5px;right:0}.lives[_ngcontent-%COMP%]   .life[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;background-image:url(/assets/sprites/life.png);background-position:center;background-repeat:no-repeat}.sky[_ngcontent-%COMP%]{flex:1;background:linear-gradient(to bottom,#020111 85%,#191621 100%)}.sky[_ngcontent-%COMP%]   .bomb-spawn[_ngcontent-%COMP%]{position:absolute;width:100%;display:flex;justify-content:space-around}.ground[_ngcontent-%COMP%]{height:32px;bottom:0px;background-image:url(/assets/sprites/grass.png);background-position:center;font-size:22px;line-height:32px;font-weight:700;color:#fff;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black}.center-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;transform:translateY(-50%);width:100%}.center-text[_ngcontent-%COMP%]   .game-over[_ngcontent-%COMP%], .center-text[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{width:100%;font-size:60px;line-height:60px;font-weight:700;text-align:center;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black;color:#fff;-webkit-user-select:none;user-select:none}.center-text[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{animation:flash 4s ease-in-out infinite}.center-text[_ngcontent-%COMP%]   .new-highscore[_ngcontent-%COMP%]{width:100%;font-size:24px;line-height:24px;text-align:center;text-shadow:-1px 0 black,0 1px black,1px 0 black,0 -1px black;color:#fff;margin-top:24px;animation:flash 1s ease-in-out infinite;-webkit-user-select:none;user-select:none}@keyframes flash{0%{opacity:1}50%{opacity:.1}to{opacity:1}}"],changeDetection:0}),p})();var pe=w(5642);const me=[{path:"",component:he}];let ve=(()=>{class p{}return p.\u0275fac=function(o){return new(o||p)},p.\u0275mod=d.oAB({type:p}),p.\u0275inj=d.cJS({imports:[[P.ez,I.Pc,pe.K,J.Ps,$.ot,U.Bz.forChild(me)]]}),p})()},1799:function(N){N.exports=(()=>{"use strict";var E={511:(i,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Explosion=void 0;var g=a(909);s.Explosion=class{constructor(m){var{x:v,y:_,ctx:h,hue:A,exp:e,gravity:t,friction:n,brightness:r,explosionLength:u}=m;for(this._coordinates=[],this._alpha=1,this._x=v,this._y=_,this._exp=e,this._ctx=h,this._gravity=t,this._friction=n,this._explosionLength=u;this._explosionLength--;)this._coordinates.push([v,_]);this._angle=(0,g.randomFloat)(0,2*Math.PI),this._speed=(0,g.randomInt)(1,10),this._hue=(0,g.randomInt)(A-20,A+20),this._brightness=(0,g.randomInt)(r.min,r.max),this._decay=(0,g.randomFloat)(r.decay.min,r.decay.max)}update(m){this._coordinates.pop(),this._coordinates.unshift([this._x,this._y]),this._speed*=this._friction,this._x+=Math.cos(this._angle)*this._speed,this._y+=Math.sin(this._angle)*this._speed+this._gravity,this._alpha-=this._decay,this._alpha<=this._decay&&m()}draw(){var m=this._coordinates.length-1;this._ctx.beginPath(),this._exp&&(this._ctx.arc(this._x,this._y,(0,g.randomFloat)(.5,1.5),0,2*Math.PI),this._ctx.fill()),this._ctx.fillStyle=(0,g.hsla)(this._hue,this._brightness,this._alpha),this._ctx.moveTo(this._coordinates[m][0],this._coordinates[m][1]),this._ctx.lineTo(this._x,this._y),this._ctx.strokeStyle=(0,g.hsla)(this._hue,this._brightness,this._alpha),this._ctx.stroke()}}},909:(i,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.hsla=s.getDistance=s.randomInt=s.randomFloat=void 0,s.randomFloat=function(a,g){return Math.random()*(g-a)+a},s.randomInt=function(a,g){return Math.floor(a+Math.random()*(g+1-a))},s.getDistance=function(a,g,m,v){var _=Math.pow;return Math.sqrt(_(a-m,2)+_(g-v,2))},s.hsla=function(a,g){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"hsla(".concat(a,", 100%, ").concat(g,"%, ").concat(m,")")}},449:function(i,s,a){var g=this&&this.__awaiter||function(v,_,h,A){return new(h||(h=Promise))(function(e,t){function n(c){try{u(A.next(c))}catch(l){t(l)}}function r(c){try{u(A.throw(c))}catch(l){t(l)}}function u(c){var l;c.done?e(c.value):(l=c.value,l instanceof h?l:new h(function(b){b(l)})).then(n,r)}u((A=A.apply(v,_||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0}),s.Sound=void 0;var m=a(909);s.Sound=class{constructor(v){this._buffer=[],this.onInit=!0,this._audioContext=new(window.AudioContext||window.webkitAudioContext),this.options=Object.assign({enabled:!1,files:["explosion0.mp3","explosion1.mp3","explosion2.mp3"],volume:{min:4,max:8}},v),this.init()}init(){this.onInit&&this.options.enabled&&(this.onInit=!1,this.load())}load(){return g(this,void 0,void 0,function*(){for(var v of this.options.files){var _=yield(yield fetch(v)).arrayBuffer();this._audioContext.decodeAudioData(_).then(h=>{this._buffer.push(h)}).catch(h=>{throw h})}})}play(){if(this.options.enabled&&this._buffer.length){var v=this._audioContext.createBufferSource(),_=this._buffer[(0,m.randomInt)(0,this._buffer.length-1)],h=this._audioContext.createGain();v.buffer=_,h.gain.value=(0,m.randomFloat)(this.options.volume.min/100,this.options.volume.max/100),h.connect(this._audioContext.destination),v.connect(h),v.start(0)}else this.init()}}},668:(i,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Trace=void 0;var g=a(909);s.Trace=class{constructor(m){var{x:v,y:_,dx:h,dy:A,ctx:e,hue:t,speed:n,traceLength:r,acceleration:u}=m;for(this._coordinates=[],this._currentDistance=0,this._x=v,this._y=_,this._sx=v,this._sy=_,this._dx=h,this._dy=A,this._ctx=e,this._hue=t,this._speed=n,this._traceLength=r,this._acceleration=u,this._totalDistance=(0,g.getDistance)(v,_,h,A);this._traceLength--;)this._coordinates.push([v,_]);this._angle=Math.atan2(A-_,h-v),this._brightness=(0,g.randomInt)(50,70)}update(m){this._coordinates.pop(),this._coordinates.unshift([this._x,this._y]),this._speed*=this._acceleration;var v=Math.cos(this._angle)*this._speed,_=Math.sin(this._angle)*this._speed;this._currentDistance=(0,g.getDistance)(this._sx,this._sy,this._x+v,this._y+_),this._currentDistance>=this._totalDistance?m(this._dx,this._dy,this._hue):(this._x+=v,this._y+=_)}draw(){var m=this._coordinates.length-1;this._ctx.beginPath(),this._ctx.moveTo(this._coordinates[m][0],this._coordinates[m][1]),this._ctx.lineTo(this._x,this._y),this._ctx.strokeStyle=(0,g.hsla)(this._hue,this._brightness),this._ctx.stroke()}}}},w={};function P(i){var s=w[i];if(void 0!==s)return s.exports;var a=w[i]={exports:{}};return E[i].call(a.exports,a,a.exports,P),a.exports}var I={};return(()=>{var i=I;Object.defineProperty(i,"__esModule",{value:!0}),i.Fireworks=void 0;var s=P(668),a=P(449),g=P(511),m=P(909);i.Fireworks=class{constructor(v){var{autoresize:_=!0,boundaries:h,brightness:A,delay:e,hue:t,mouse:n,sound:r,trace:u=3,speed:c=2,explosion:l=5,gravity:b=1.5,opacity:T=.5,particles:k=50,friction:C=.95,rocketsPoint:L=50,acceleration:G=1.05}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._tick=0,this._version="1.3.5",this._running=!1,this._randomRocketsPoint=!1,this._experimentals=!1,this._m=!1,this._container=v,this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._container.appendChild(this._canvas),this._sound=new a.Sound(r),this.setSize(),this.setBoundaries(Object.assign({visible:!1,x:50,y:50},h)),this.autoresize=_,this.trace=u,this.speed=c,this.explosion=l,this.gravity=b,this.opacity=T,this.particles=k,this.friction=C,this.rocketsPoint=L,this.acceleration=G,this.hue=Object.assign({min:0,max:360},t),this.mouse=Object.assign({click:!1,move:!1,max:1},n),this.delay=Object.assign({min:15,max:30},e),this.brightness=Object.assign({min:50,max:80,decay:{min:.015,max:.03}},A),this.autoresize&&window.addEventListener("resize",()=>this.windowResize()),this._canvas.addEventListener("mousedown",B=>this.mouseDown(B)),this._canvas.addEventListener("mouseup",B=>this.mouseUp(B)),this._canvas.addEventListener("mousemove",B=>this.mouseMove(B))}get isRunning(){return this._running}get version(){return this._version}start(){this._running||(this._running=!0,this.clear(),this.render())}stop(){this._running&&(this._running=!1,this.clear())}unmount(){window.removeEventListener("resize",this.windowResize),this._canvas.addEventListener("mousedown",this.mouseDown),this._canvas.addEventListener("mouseup",this.mouseUp),this._canvas.addEventListener("mousemove",this.mouseMove)}pause(){this._running=!this._running}clear(){this._ctx&&(this._traces=[],this._explosions=[],this._ctx.clearRect(0,0,this._width,this._height))}setOptions(v){for(var[_,h]of Object.entries(v)){var A=Object.prototype.hasOwnProperty.call(this,_);if("function"==typeof this[_])throw new Error("You cannot change the methods of the class!");A&&("object"==typeof this[_]?Object.assign(this[_],h):this[_]=h),"sound"===_&&Object.assign(this._sound.options,h)}}setSize(){var{width:v=this._container.clientWidth,height:_=this._container.clientHeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._width=v,this._height=_,this._canvas.width=v,this._canvas.height=_,this.setBoundaries({width:v,height:_})}setBoundaries(v){this.boundaries=Object.assign(Object.assign({},this.boundaries),v)}useMouse(v,_){(this.mouse.click||this.mouse.move)&&(this._mx=v.pageX-this._canvas.offsetLeft,this._my=v.pageY-this._canvas.offsetTop,this._m=_)}windowResize(){this.setSize()}mouseDown(v){this.useMouse(v,this.mouse.click)}mouseUp(v){this.useMouse(v,!1)}mouseMove(v){this.useMouse(v,this._m)}render(){this._ctx&&this._running&&(requestAnimationFrame(()=>this.render()),this._ctx.globalCompositeOperation="destination-out",this._ctx.fillStyle="rgba(0, 0, 0, ".concat(this.opacity,")"),this._ctx.fillRect(0,0,this._width,this._height),this._ctx.globalCompositeOperation="lighter",this.drawBoundaries(),this.initTrace(),this.drawTrace(),this.drawExplosion(),this._tick++)}drawBoundaries(){this.boundaries.visible&&(this._ctx.beginPath(),this._ctx.strokeStyle="red",this._ctx.rect(this.boundaries.x,this.boundaries.y,this.boundaries.width-2*this.boundaries.x,.5*this.boundaries.height),this._ctx.stroke())}initTrace(){this._ds=(0,m.randomInt)(this.delay.min,this.delay.max),(2*this._ds<this._tick||this._m&&this.mouse.max>this._traces.length)&&(this._traces.push(new s.Trace({x:this._width*(this._randomRocketsPoint?(0,m.randomInt)(0,100):this.rocketsPoint)/100,y:this._height,dx:this._mx&&this.mouse.move||this._m?this._mx:(0,m.randomInt)(this.boundaries.x,this.boundaries.width-2*this.boundaries.x),dy:this._my&&this.mouse.move||this._m?this._my:(0,m.randomInt)(this.boundaries.y,.5*this.boundaries.height),ctx:this._ctx,hue:(0,m.randomInt)(this.hue.min,this.hue.max),speed:this.speed,acceleration:this.acceleration,traceLength:this.trace})),this._tick=0)}drawTrace(){for(var v=this._traces.length;v--;)this._traces[v].draw(),this._traces[v].update((_,h,A)=>{this.initExplosion(_,h,A),this._sound.play(),this._traces.splice(v,1)})}initExplosion(v,_,h){for(var A=this.particles;A--;)this._explosions.push(new g.Explosion({x:v,y:_,ctx:this._ctx,hue:h,friction:this.friction,gravity:this.gravity,explosionLength:this.explosion,brightness:this.brightness,exp:this._experimentals}))}drawExplosion(){for(var v=this._explosions.length;v--;)this._explosions[v].draw(),this._explosions[v].update(()=>{this._explosions.splice(v,1)})}}})(),I})()},6461:(N,E)=>{var P;!function(){"use strict";var I=function(){this.init()};I.prototype={init:function(){var e=this||i;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||i;if(e=parseFloat(e),t.ctx||A(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),u=0;u<r.length;u++){var c=t._howls[n]._soundById(r[u]);c&&c._node&&(c._node.volume=c._volume*e)}return t}return t._volume},mute:function(e){var t=this||i;t.ctx||A(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),u=0;u<r.length;u++){var c=t._howls[n]._soundById(r[u]);c&&c._node&&(c._node.muted=!!e||c._muted)}return t},stop:function(){for(var e=this||i,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||i,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,A()),e},codecs:function(e){return(this||i)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||i;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(n){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(n){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||i,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(k){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator?e._navigator.userAgent:"",u=r.match(/OPR\/([0-6].)/g),c=u&&parseInt(u[0].split("/")[1],10)<33,l=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),b=r.match(/Version\/(.*?) /),T=l&&b&&parseInt(b[1],10)<15;return e._codecs={mp3:!(c||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(T||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(T||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||i;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&44100!==e.ctx.sampleRate&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(k){e.noAudio=!0;break}for(var u=0;u<e._howls.length;u++)if(!e._howls[u]._webAudio)for(var c=e._howls[u]._getSoundIds(),l=0;l<c.length;l++){var b=e._howls[u]._soundById(c[l]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}e._autoResume();var T=e.ctx.createBufferSource();T.buffer=e._scratchBuffer,T.connect(e.ctx.destination),void 0===T.start?T.noteOn(0):T.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),T.onended=function(){T.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var k=0;k<e._howls.length;k++)e._howls[k]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||i;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||i;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&i.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var r=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(r,r)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&i.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var i=new I,s=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(e){var t=this;return i.ctx||A(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=i.usingWebAudio&&!t._html5,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(i.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var r,u;if(e._format&&e._format[n])r=e._format[n];else{if("string"!=typeof(u=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(u))||(r=/\.([^.]+)$/.exec(u.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&i.codecs(r)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&m(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var u=0,c=0;c<n._sounds.length;c++)n._sounds[c]._paused&&!n._sounds[c]._ended&&(u++,r=n._sounds[c]._id);1===u?e=null:r=null}}var l=r?n._soundById(r):n._inactiveSound();if(!l)return null;if(r&&!e&&(e=l._sprite||"__default"),"loaded"!==n._state){l._sprite=e,l._ended=!1;var b=l._id;return n._queue.push({event:"play",action:function(){n.play(b)}}),b}if(r&&!l._paused)return t||n._loadQueue("play"),l._id;n._webAudio&&i._autoResume();var T=Math.max(0,l._seek>0?l._seek:n._sprite[e][0]/1e3),k=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-T),C=1e3*k/Math.abs(l._rate),L=n._sprite[e][0]/1e3,G=(n._sprite[e][0]+n._sprite[e][1])/1e3;l._sprite=e,l._ended=!1;var B=function(){l._paused=!1,l._seek=T,l._start=L,l._stop=G,l._loop=!(!l._loop&&!n._sprite[e][2])};if(!(T>=G)){var S=l._node;if(n._webAudio){var D=function(){n._playLock=!1,B(),n._refreshBuffer(l),S.gain.setValueAtTime(l._muted||n._muted?0:l._volume,i.ctx.currentTime),l._playStart=i.ctx.currentTime,void 0===S.bufferSource.start?S.bufferSource.noteGrainOn(0,T,l._loop?86400:k):S.bufferSource.start(0,T,l._loop?86400:k),C!==1/0&&(n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),C)),t||setTimeout(function(){n._emit("play",l._id),n._loadQueue()},0)};"running"===i.state&&"interrupted"!==i.ctx.state?D():(n._playLock=!0,n.once("resume",D),n._clearTimer(l._id))}else{var Y=function(){S.currentTime=T,S.muted=l._muted||n._muted||i._muted||S.muted,S.volume=l._volume*i.volume(),S.playbackRate=l._rate;try{var R=S.play();if(R&&"undefined"!=typeof Promise&&(R instanceof Promise||"function"==typeof R.then)?(n._playLock=!0,B(),R.then(function(){n._playLock=!1,S._unlocked=!0,t?n._loadQueue():n._emit("play",l._id)}).catch(function(){n._playLock=!1,n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0})):t||(n._playLock=!1,B(),n._emit("play",l._id)),S.playbackRate=l._rate,S.paused)return void n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||l._loop?n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),C):(n._endTimers[l._id]=function(){n._ended(l),S.removeEventListener("ended",n._endTimers[l._id],!1)},S.addEventListener("ended",n._endTimers[l._id],!1))}catch(Z){n._emit("playerror",l._id,Z)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===S.src&&(S.src=n._src,S.load());var d=window&&window.ejecta||!S.readyState&&i._navigator.isCocoonJS;if(S.readyState>=3||d)Y();else{n._playLock=!0,n._state="loading";var V=function(){n._state="loaded",Y(),S.removeEventListener(i._canPlayEvent,V,!1)};S.addEventListener(i._canPlayEvent,V,!1),n._clearTimer(l._id)}}return l._id}n._ended(l)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var u=t._soundById(n[r]);if(u&&!u._paused&&(u._seek=t.seek(n[r]),u._rateSeek=0,u._paused=!0,t._stopFade(n[r]),u._node))if(t._webAudio){if(!u._node.bufferSource)continue;void 0===u._node.bufferSource.stop?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),t._cleanBuffer(u._node)}else(!isNaN(u._node.duration)||u._node.duration===1/0)&&u._node.pause();arguments[1]||t._emit("pause",u?u._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),u=0;u<r.length;u++){n._clearTimer(r[u]);var c=n._soundById(r[u]);c&&(c._seek=c._start||0,c._rateSeek=0,c._paused=!0,c._ended=!0,n._stopFade(r[u]),c._node&&(n._webAudio?c._node.bufferSource&&(void 0===c._node.bufferSource.stop?c._node.bufferSource.noteOff(0):c._node.bufferSource.stop(0),n._cleanBuffer(c._node)):(!isNaN(c._node.duration)||c._node.duration===1/0)&&(c._node.currentTime=c._start||0,c._node.pause(),c._node.duration===1/0&&n._clearSound(c._node))),t||n._emit("stop",c._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),u=0;u<r.length;u++){var c=n._soundById(r[u]);c&&(c._muted=e,c._interval&&n._stopFade(c._id),n._webAudio&&c._node?c._node.gain.setValueAtTime(e?0:c._volume,i.ctx.currentTime):c._node&&(c._node.muted=!!i._muted||e),n._emit("mute",c._id))}return n},volume:function(){var n,r,l,e=this,t=arguments;if(0===t.length)return e._volume;if(1===t.length||2===t.length&&void 0===t[1]){var u=e._getSoundIds(),c=u.indexOf(t[0]);c>=0?r=parseInt(t[0],10):n=parseFloat(t[0])}else t.length>=2&&(n=parseFloat(t[0]),r=parseInt(t[1],10));if(!(void 0!==n&&n>=0&&n<=1))return(l=r?e._soundById(r):e._sounds[0])?l._volume:0;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,t)}}),e;void 0===r&&(e._volume=n),r=e._getSoundIds(r);for(var b=0;b<r.length;b++)(l=e._soundById(r[b]))&&(l._volume=n,t[2]||e._stopFade(r[b]),e._webAudio&&l._node&&!l._muted?l._node.gain.setValueAtTime(n,i.ctx.currentTime):l._node&&!l._muted&&(l._node.volume=n*i.volume()),e._emit("volume",l._id));return e},fade:function(e,t,n,r){var u=this;if("loaded"!==u._state||u._playLock)return u._queue.push({event:"fade",action:function(){u.fade(e,t,n,r)}}),u;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),u.volume(e,r);for(var c=u._getSoundIds(r),l=0;l<c.length;l++){var b=u._soundById(c[l]);if(b){if(r||u._stopFade(c[l]),u._webAudio&&!b._muted){var T=i.ctx.currentTime,k=T+n/1e3;b._volume=e,b._node.gain.setValueAtTime(e,T),b._node.gain.linearRampToValueAtTime(t,k)}u._startFadeInterval(b,e,t,n,c[l],void 0===r)}}return u},_startFadeInterval:function(e,t,n,r,u,c){var l=this,b=t,T=n-t,k=Math.abs(T/.01),C=Math.max(4,k>0?r/k:r),L=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var G=(Date.now()-L)/r;L=Date.now(),b+=T*G,b=Math.round(100*b)/100,b=T<0?Math.max(n,b):Math.min(n,b),l._webAudio?e._volume=b:l.volume(b,e._id,!0),c&&(l._volume=b),(n<t&&b<=n||n>t&&b>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,l.volume(n,e._id),l._emit("fade",e._id))},C)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var n,r,u,e=this,t=arguments;if(0===t.length)return e._loop;if(1===t.length){if("boolean"!=typeof t[0])return!!(u=e._soundById(parseInt(t[0],10)))&&u._loop;e._loop=n=t[0]}else 2===t.length&&(n=t[0],r=parseInt(t[1],10));for(var c=e._getSoundIds(r),l=0;l<c.length;l++)(u=e._soundById(c[l]))&&(u._loop=n,e._webAudio&&u._node&&u._node.bufferSource&&(u._node.bufferSource.loop=n,n&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop,e.playing(c[l])&&(e.pause(c[l],!0),e.play(c[l],!0)))));return e},rate:function(){var n,r,l,e=this,t=arguments;if(0===t.length)r=e._sounds[0]._id;else if(1===t.length){var u=e._getSoundIds(),c=u.indexOf(t[0]);c>=0?r=parseInt(t[0],10):n=parseFloat(t[0])}else 2===t.length&&(n=parseFloat(t[0]),r=parseInt(t[1],10));if("number"!=typeof n)return(l=e._soundById(r))?l._rate:e._rate;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,t)}}),e;void 0===r&&(e._rate=n),r=e._getSoundIds(r);for(var b=0;b<r.length;b++)if(l=e._soundById(r[b])){e.playing(r[b])&&(l._rateSeek=e.seek(r[b]),l._playStart=e._webAudio?i.ctx.currentTime:l._playStart),l._rate=n,e._webAudio&&l._node&&l._node.bufferSource?l._node.bufferSource.playbackRate.setValueAtTime(n,i.ctx.currentTime):l._node&&(l._node.playbackRate=n);var T=e.seek(r[b]),k=(e._sprite[l._sprite][0]+e._sprite[l._sprite][1])/1e3-T,C=1e3*k/Math.abs(l._rate);(e._endTimers[r[b]]||!l._paused)&&(e._clearTimer(r[b]),e._endTimers[r[b]]=setTimeout(e._ended.bind(e,l),C)),e._emit("rate",l._id)}return e},seek:function(){var n,r,e=this,t=arguments;if(0===t.length)e._sounds.length&&(r=e._sounds[0]._id);else if(1===t.length){var u=e._getSoundIds(),c=u.indexOf(t[0]);c>=0?r=parseInt(t[0],10):e._sounds.length&&(r=e._sounds[0]._id,n=parseFloat(t[0]))}else 2===t.length&&(n=parseFloat(t[0]),r=parseInt(t[1],10));if(void 0===r)return 0;if("number"==typeof n&&("loaded"!==e._state||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,t)}}),e;var l=e._soundById(r);if(l){if(!("number"==typeof n&&n>=0)){if(e._webAudio){var C=e.playing(r)?i.ctx.currentTime-l._playStart:0,L=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(L+C*Math.abs(l._rate))}return l._node.currentTime}var b=e.playing(r);b&&e.pause(r,!0),l._seek=n,l._ended=!1,e._clearTimer(r),!e._webAudio&&l._node&&!isNaN(l._node.duration)&&(l._node.currentTime=n);var T=function(){b&&e.play(r,!0),e._emit("seek",r)};if(b&&!e._webAudio){var k=function(){e._playLock?setTimeout(k,0):T()};setTimeout(k,0)}else T()}return e},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(i._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),i._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=i._howls.indexOf(e);r>=0&&i._howls.splice(r,1);var u=!0;for(n=0;n<i._howls.length;n++)if(i._howls[n]._src===e._src||e._src.indexOf(i._howls[n]._src)>=0){u=!1;break}return g&&u&&delete g[e._src],i.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){return"function"==typeof t&&this["_on"+e].push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this,u=r["_on"+e],c=0;if("number"==typeof t&&(n=t,t=null),t||n)for(c=0;c<u.length;c++){var l=n===u[c].id;if(t===u[c].fn&&l||!t&&l){u.splice(c,1);break}}else if(e)r["_on"+e]=[];else{var b=Object.keys(r);for(c=0;c<b.length;c++)0===b[c].indexOf("_on")&&Array.isArray(r[b[c]])&&(r[b[c]]=[])}return r},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this,u=r["_on"+e],c=u.length-1;c>=0;c--)(!u[c].id||u[c].id===t||"load"===e)&&(setTimeout(function(l){l.call(this,t,n)}.bind(r,u[c].fn),0),u[c].once&&r.off(e,u[c].fn,u[c].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=i.ctx.currentTime;var u=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),u)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),i._autoSuspend()),!t._webAudio&&!r&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new a(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var n=[],r=0;r<this._sounds.length;r++)n.push(this._sounds[r]._id);return n}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=i.ctx.createBufferSource(),e._node.bufferSource.buffer=g[this._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,i.ctx.currentTime),this},_cleanBuffer:function(e){var n=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),n))try{e.bufferSource.buffer=i._scratchBuffer}catch(r){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++i._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=i._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),e._node.gain.setValueAtTime(n,i.ctx.currentTime),e._node.paused=!0,e._node.connect(i.masterGain)):i.noAudio||(e._node=i._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(i._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*i.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++i._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(i._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var g={},m=function(e){var t=e._src;if(g[t])return e._duration=g[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),u=0;u<n.length;++u)r[u]=n.charCodeAt(u);_(r.buffer,e)}else{var c=new XMLHttpRequest;c.open(e._xhr.method,t,!0),c.withCredentials=e._xhr.withCredentials,c.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(l){c.setRequestHeader(l,e._xhr.headers[l])}),c.onload=function(){var l=(c.status+"")[0];"0"===l||"2"===l||"3"===l?_(c.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+c.status+".")},c.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete g[t],e.load())},v(c)}},v=function(e){try{e.send()}catch(t){e.onerror()}},_=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(u){u&&t._sounds.length>0?(g[t._src]=u,h(t,u)):n()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(e).then(r).catch(n):i.ctx.decodeAudioData(e,r,n)},h=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},A=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(u){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),t=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!r&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};void 0!==(P=function(){return{Howler:i,Howl:s}}.apply(E,[]))&&(N.exports=P),E.Howler=i,E.Howl=s,"undefined"!=typeof global?(global.HowlerGlobal=I,global.Howler=i,global.Howl=s,global.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=I,window.Howler=i,window.Howl=s,window.Sound=a)}(),function(){"use strict";var i;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(i){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var a=s._howls.length-1;a>=0;a--)s._howls[a].stereo(i);return s},HowlerGlobal.prototype.pos=function(i,s,a){var g=this;return g.ctx&&g.ctx.listener?"number"!=typeof i?g._pos:(g._pos=[i,s="number"!=typeof s?g._pos[1]:s,a="number"!=typeof a?g._pos[2]:a],void 0!==g.ctx.listener.positionX?(g.ctx.listener.positionX.setTargetAtTime(g._pos[0],Howler.ctx.currentTime,.1),g.ctx.listener.positionY.setTargetAtTime(g._pos[1],Howler.ctx.currentTime,.1),g.ctx.listener.positionZ.setTargetAtTime(g._pos[2],Howler.ctx.currentTime,.1)):g.ctx.listener.setPosition(g._pos[0],g._pos[1],g._pos[2]),g):g},HowlerGlobal.prototype.orientation=function(i,s,a,g,m,v){var _=this;if(!_.ctx||!_.ctx.listener)return _;var h=_._orientation;return"number"!=typeof i?h:(_._orientation=[i,s="number"!=typeof s?h[1]:s,a="number"!=typeof a?h[2]:a,g="number"!=typeof g?h[3]:g,m="number"!=typeof m?h[4]:m,v="number"!=typeof v?h[5]:v],void 0!==_.ctx.listener.forwardX?(_.ctx.listener.forwardX.setTargetAtTime(i,Howler.ctx.currentTime,.1),_.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),_.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),_.ctx.listener.upX.setTargetAtTime(g,Howler.ctx.currentTime,.1),_.ctx.listener.upY.setTargetAtTime(m,Howler.ctx.currentTime,.1),_.ctx.listener.upZ.setTargetAtTime(v,Howler.ctx.currentTime,.1)):_.ctx.listener.setOrientation(i,s,a,g,m,v),_)},Howl.prototype.init=(i=Howl.prototype.init,function(s){var a=this;return a._orientation=s.orientation||[1,0,0],a._stereo=s.stereo||null,a._pos=s.pos||null,a._pannerAttr={coneInnerAngle:void 0!==s.coneInnerAngle?s.coneInnerAngle:360,coneOuterAngle:void 0!==s.coneOuterAngle?s.coneOuterAngle:360,coneOuterGain:void 0!==s.coneOuterGain?s.coneOuterGain:0,distanceModel:void 0!==s.distanceModel?s.distanceModel:"inverse",maxDistance:void 0!==s.maxDistance?s.maxDistance:1e4,panningModel:void 0!==s.panningModel?s.panningModel:"HRTF",refDistance:void 0!==s.refDistance?s.refDistance:1,rolloffFactor:void 0!==s.rolloffFactor?s.rolloffFactor:1},a._onstereo=s.onstereo?[{fn:s.onstereo}]:[],a._onpos=s.onpos?[{fn:s.onpos}]:[],a._onorientation=s.onorientation?[{fn:s.onorientation}]:[],i.call(this,s)}),Howl.prototype.stereo=function(i,s){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"stereo",action:function(){a.stereo(i,s)}}),a;var g=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===s){if("number"!=typeof i)return a._stereo;a._stereo=i,a._pos=[i,0,0]}for(var m=a._getSoundIds(s),v=0;v<m.length;v++){var _=a._soundById(m[v]);if(_){if("number"!=typeof i)return _._stereo;_._stereo=i,_._pos=[i,0,0],_._node&&(_._pannerAttr.panningModel="equalpower",(!_._panner||!_._panner.pan)&&I(_,g),"spatial"===g?void 0!==_._panner.positionX?(_._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),_._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),_._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):_._panner.setPosition(i,0,0):_._panner.pan.setValueAtTime(i,Howler.ctx.currentTime)),a._emit("stereo",_._id)}}return a},Howl.prototype.pos=function(i,s,a,g){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"pos",action:function(){m.pos(i,s,a,g)}}),m;if(s="number"!=typeof s?0:s,a="number"!=typeof a?-.5:a,void 0===g){if("number"!=typeof i)return m._pos;m._pos=[i,s,a]}for(var v=m._getSoundIds(g),_=0;_<v.length;_++){var h=m._soundById(v[_]);if(h){if("number"!=typeof i)return h._pos;h._pos=[i,s,a],h._node&&((!h._panner||h._panner.pan)&&I(h,"spatial"),void 0!==h._panner.positionX?(h._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):h._panner.setPosition(i,s,a)),m._emit("pos",h._id)}}return m},Howl.prototype.orientation=function(i,s,a,g){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"orientation",action:function(){m.orientation(i,s,a,g)}}),m;if(s="number"!=typeof s?m._orientation[1]:s,a="number"!=typeof a?m._orientation[2]:a,void 0===g){if("number"!=typeof i)return m._orientation;m._orientation=[i,s,a]}for(var v=m._getSoundIds(g),_=0;_<v.length;_++){var h=m._soundById(v[_]);if(h){if("number"!=typeof i)return h._orientation;h._orientation=[i,s,a],h._node&&(h._panner||(h._pos||(h._pos=m._pos||[0,0,-.5]),I(h,"spatial")),void 0!==h._panner.orientationX?(h._panner.orientationX.setValueAtTime(i,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):h._panner.setOrientation(i,s,a)),m._emit("orientation",h._id)}}return m},Howl.prototype.pannerAttr=function(){var a,g,m,i=this,s=arguments;if(!i._webAudio)return i;if(0===s.length)return i._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(m=i._soundById(parseInt(s[0],10)))?m._pannerAttr:i._pannerAttr;a=s[0],void 0===g&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==a.pannerAttr.coneInnerAngle?a.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==a.pannerAttr.coneOuterAngle?a.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==a.pannerAttr.coneOuterGain?a.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==a.pannerAttr.distanceModel?a.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==a.pannerAttr.maxDistance?a.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==a.pannerAttr.refDistance?a.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==a.pannerAttr.rolloffFactor?a.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==a.pannerAttr.panningModel?a.pannerAttr.panningModel:i._panningModel})}else 2===s.length&&(a=s[0],g=parseInt(s[1],10));for(var v=i._getSoundIds(g),_=0;_<v.length;_++)if(m=i._soundById(v[_])){var h=m._pannerAttr;h={coneInnerAngle:void 0!==a.coneInnerAngle?a.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==a.coneOuterAngle?a.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==a.coneOuterGain?a.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==a.distanceModel?a.distanceModel:h.distanceModel,maxDistance:void 0!==a.maxDistance?a.maxDistance:h.maxDistance,refDistance:void 0!==a.refDistance?a.refDistance:h.refDistance,rolloffFactor:void 0!==a.rolloffFactor?a.rolloffFactor:h.rolloffFactor,panningModel:void 0!==a.panningModel?a.panningModel:h.panningModel};var A=m._panner;A?(A.coneInnerAngle=h.coneInnerAngle,A.coneOuterAngle=h.coneOuterAngle,A.coneOuterGain=h.coneOuterGain,A.distanceModel=h.distanceModel,A.maxDistance=h.maxDistance,A.refDistance=h.refDistance,A.rolloffFactor=h.rolloffFactor,A.panningModel=h.panningModel):(m._pos||(m._pos=i._pos||[0,0,-.5]),I(m,"spatial"))}return i},Sound.prototype.init=function(i){return function(){var s=this,a=s._parent;s._orientation=a._orientation,s._stereo=a._stereo,s._pos=a._pos,s._pannerAttr=a._pannerAttr,i.call(this),s._stereo?a.stereo(s._stereo):s._pos&&a.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(i){return function(){var s=this,a=s._parent;return s._orientation=a._orientation,s._stereo=a._stereo,s._pos=a._pos,s._pannerAttr=a._pannerAttr,s._stereo?a.stereo(s._stereo):s._pos?a.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,a._refreshBuffer(s)),i.call(this)}}(Sound.prototype.reset);var I=function(i,s){"spatial"===(s=s||"spatial")?(i._panner=Howler.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,void 0!==i._panner.positionX?(i._panner.positionX.setValueAtTime(i._pos[0],Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],Howler.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),void 0!==i._panner.orientationX?(i._panner.orientationX.setValueAtTime(i._orientation[0],Howler.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],Howler.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],Howler.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=Howler.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,Howler.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}}()}}]);